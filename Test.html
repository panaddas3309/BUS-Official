<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏¥‡πâ‡∏ô PDF</title>
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
<style>
  body { font-family: Arial; padding: 20px; }
  label, input, button { display: block; margin-bottom: 10px; }
  input { padding: 5px; width: 300px; }
  button { padding: 8px 15px; cursor: pointer; margin-bottom: 20px; }
  iframe { width: 100%; height: 500px; border: 1px solid #ccc; }
</style>
</head>
<body>
<h2>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏á‡πÉ‡∏ô PDF</h2>

<label for="nameInput">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•:</label>
<input type="text" id="nameInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•">

<button id="previewBtn">üîç ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á PDF</button>
<button id="printBtn">üñ® ‡∏õ‡∏£‡∏¥‡πâ‡∏ô PDF</button>

<iframe id="pdfPreview"></iframe>

<script>
const pdfUrl = "https://raw.githubusercontent.com/USERNAME/REPO_NAME/main/‡πÉ‡∏ö‡∏•‡∏≤.pdf"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

async function generatePdf(name) {
  const existingPdfBytes = await fetch(pdfUrl).then(res => res.arrayBuffer());
  const { PDFDocument, StandardFonts, rgb } = PDFLib;
  const pdfDoc = await PDFDocument.load(existingPdfBytes);
  const pages = pdfDoc.getPages();
  const firstPage = pages[0];

  // ‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏á PDF
  firstPage.drawText(`‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•: ${name}`, {
    x: 100, y: 700, size: 14,
    font: await pdfDoc.embedFont(StandardFonts.Helvetica),
    color: rgb(0,0,0)
  });

  return pdfDoc.save();
}

// ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
document.getElementById("previewBtn").addEventListener("click", async () => {
  const name = document.getElementById("nameInput").value || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠";
  const pdfBytes = await generatePdf(name);
  const blob = new Blob([pdfBytes], { type: "application/pdf" });
  const blobUrl = URL.createObjectURL(blob);
  document.getElementById("pdfPreview").src = blobUrl;
});

// ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏¥‡πâ‡∏ô
document.getElementById("printBtn").addEventListener("click", async () => {
  const name = document.getElementById("nameInput").value || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠";
  const pdfBytes = await generatePdf(name);
  const blob = new Blob([pdfBytes], { type: "application/pdf" });
  const blobUrl = URL.createObjectURL(blob);
  const newTab = window.open(blobUrl, "_blank");
  newTab.focus();
});
</script>
</body>
</html>
